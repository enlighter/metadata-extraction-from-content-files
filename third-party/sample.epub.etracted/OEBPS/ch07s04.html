<?xml version="1.0" encoding="utf-8" ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"><head><title>The jQuery UI plugin library</title><link rel="stylesheet" href="epub.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"/></head><body id="page"><div class="section" title="The jQuery UI plugin library"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec59"/>The jQuery UI plugin library</h1></div></div></div><p>While most plugins, such as <a id="id559" class="indexterm"/>Cycle and Cookie, focus on a single task, jQuery UI tackles a wide variety of challenges. In fact, while the jQuery UI code may often be packaged as a single file, it is actually a comprehensive suite of related plugins.</p><p>The jQuery UI team has created a number of core interaction components and full-fledged widgets to help make the web experience more like that of a desktop application. Interaction components include methods for dragging, dropping, sorting, selecting, and resizing items. The current stable of widgets includes buttons, accordions, datepickers, dialogs, and so on. Additionally, jQuery UI provides an extensive set of advanced effects to supplement the core jQuery animations.</p><p>The full UI library is too extensive <a id="id560" class="indexterm"/>to be adequately covered within this chapter; indeed, there are entire books devoted to the subject. Fortunately, a major focus of the project is consistency among its features, so exploring a couple of pieces in detail will serve to get us started in using the rest of them as needed.</p><p>Downloads, documentation, and demos <a id="id561" class="indexterm"/>of all the jQuery UI modules are available at <a class="ulink" href="http://jqueryui.com/">http://jqueryui.com/</a>. The download page offers a combined download with all the features baked in, or a customizable download that can contain just the functionality we need. The downloadable ZIP file also contains a stylesheet and images which we need to include when we use jQuery UI's interaction components and widgets.</p><div class="section" title="Effects"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec81"/>Effects</h2></div></div></div><p>The effects module of jQuery UI <a id="id562" class="indexterm"/>consists of a core and a set of independent effect components. The core file provides animations for colors and classes, as well as advanced easing.</p><div class="section" title="Color animations"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec14"/>Color animations</h3></div></div></div><p>With jQuery UI's core <a id="id563" class="indexterm"/>effects component linked into the document, the <code class="literal">.animate()</code> method is extended to accept additional style properties, such as <code class="literal">borderTopColor</code>, <code class="literal">backgroundColor</code>, and <code class="literal">color</code>. For example, we can now gradually <a id="id564" class="indexterm"/>change an element from white text on a black background to black text on a light gray background as follows:</p><div class="informalexample"><pre class="programlisting">$books.hover(function() {
  $books.find('.title').animate({
    backgroundColor: '#eee',
    color: '#000'
  }, 1000);
}, function() {
  $books.find('.title').animate({
    backgroundColor: '#000',
    color: '#fff'
  }, 1000);
});</pre></div><p>
<span class="emphasis"><em>Listing 7.8</em></span>
</p><p>Now when the mouse cursor enters the book slideshow region of the page, the book title's text color and background <a id="id565" class="indexterm"/>color both smoothly animate over a <a id="id566" class="indexterm"/>period of one second (1000 ms):</p><div class="mediaobject"><img src="graphics/3145_07_03.jpg" alt="Color animations"/></div></div><div class="section" title="Class animations"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec15"/>Class animations</h3></div></div></div><p>The three CSS class <a id="id567" class="indexterm"/>methods that we have worked with in previous chapters&#x2014;<code class="literal">.addClass()</code>, <code class="literal">.removeClass()</code>, and <code class="literal">.toggleClass()</code>&#x2014;are extended by jQuery UI to take an optional second argument for the animation duration. When this <a id="id568" class="indexterm"/>duration is specified, the page behaves as if we had called <code class="literal">.animate()</code> and directly specified all of the style attributes that change as a result of applying the class to the element:</p><div class="informalexample"><pre class="programlisting">$(document).ready(function() {
  $('h1').click(function() {
    $(this).toggleClass('highlighted', 'slow');
  });
});</pre></div><p>
<span class="emphasis"><em>Listing 7.9</em></span>
</p><p>By executing the code in Listing 7.9, we've caused a click on the page header to add or remove the <code class="literal">highlighted</code> class. Since we specified a <code class="literal">slow</code> speed, though, the resulting color, border, and margin changes animate into place rather than immediately taking effect:</p><div class="mediaobject"><img src="graphics/3145_07_04.jpg" alt="Class animations"/></div></div><div class="section" title="Advanced easing"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec16"/>Advanced easing</h3></div></div></div><p>When we instruct jQuery to perform an animation over a specified duration, it does not do so at a constant rate. If, for example, we call <code class="literal">$('#my-div').slideUp(1000)</code>, we know it will take a full second for the height of the element to reach zero; however, at the beginning and end of that second the height will be changing slowly, and in the middle it will be changing quickly. This rate alteration, called <span class="strong"><strong>easing</strong></span>, helps the animation to appear smooth and natural.</p><p>Advanced easing functions vary <a id="id569" class="indexterm"/>
<a id="id570" class="indexterm"/>this acceleration and deceleration curve to provide distinctive results. For example, the <code class="literal">easeInExpo</code> function grows exponentially, ending an animation at many times the speed at which it started. We can specify a custom easing function in any of the core jQuery animation methods or jQuery UI effect methods. This can be done by either adding an argument or adding an option to a settings object, depending on the syntax being used.</p><p>To see this in action, we can provide <code class="literal">easeInExpo</code> as the easing style for the <code class="literal">.toggleClass()</code> method <a id="id571" class="indexterm"/>we just introduced in Listing 7.9 as follows:</p><div class="informalexample"><pre class="programlisting">$(document).ready(function() {
  $('h1').click(function() {
<span class="strong"><strong>    $(this).toggleClass('highlighted', 'slow', 'easeInExpo');</strong></span>
  });
});
</pre></div><p>
<span class="emphasis"><em>Listing 7.10</em></span>
</p><p>Now whenever the header is clicked, the styles modified by toggling the class attribute begin appearing very gradually, then accelerate and complete the transition abruptly.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip38"/>Tip</h3><p>
<span class="strong"><strong>View easing functions in action</strong></span>
</p><p>Demonstrations of the full set of easing functions are available at <a class="ulink" href="http://api.jqueryui.com/easings/">http://api.jqueryui.com/easings/</a>.</p></div></div></div><div class="section" title="Additional effects"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec17"/>Additional effects</h3></div></div></div><p>The individual effect files <a id="id572" class="indexterm"/>included in jQuery UI add various transitions, some of which can be quite a bit more complex than the simple sliding and fading animations offered by jQuery itself. These effects are invoked by calling the <code class="literal">.effect()</code> method, which is added by jQuery UI. Effects that cause an element to be hidden or shown can instead be invoked using <code class="literal">.show()</code>, <code class="literal">.hide()</code>, and <code class="literal">.toggle()</code>, if desired.</p><p>The effects supplied by jQuery UI can serve a number of purposes. Some, like <code class="literal">transfer</code> and <code class="literal">size</code>, are useful when elements are to change shape and position. Others, such as <code class="literal">explode</code> and <code class="literal">puff</code>, offer attractive hiding animations. Still others, including <code class="literal">pulsate</code> and <code class="literal">shake</code>, call attention to an element.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip39"/>Tip</h3><p>
<span class="strong"><strong>View effects in action</strong></span>
</p><p>All of the jQuery UI effects are showcased at <a class="ulink" href="http://jqueryui.com/effect/#default">http://jqueryui.com/effect/#default</a>.</p></div></div><p>The <code class="literal">shake</code> behavior is particularly <a id="id573" class="indexterm"/>nice for reinforcing that an action is not currently applicable. We could make use of this effect on our page when the <span class="strong"><strong>Resume</strong></span> button would have no effect:</p><div class="informalexample"><pre class="programlisting">$('&lt;button&gt;Resume&lt;/button&gt;').click(function(event) {
  event.preventDefault();
  var $paused = $('ul:paused');
  if ($paused.length) {
    $paused.cycle('resume');
  }
  else {
    $(this).effect('shake', {
      distance: 10
    });
  }
}).appendTo($controls);</pre></div><p>
<span class="emphasis"><em>Listing 7.11</em></span>
</p><p>Our new code checks the length of <code class="literal">$('ul:paused')</code> to determine if there are any paused slideshows to resume. If so, it calls Cycle's <code class="literal">resume</code> action as before; otherwise, the <code class="literal">shake</code> effect is performed. We see here that <code class="literal">shake</code>, as with the other effects, has options available to fine-tune its appearance. Here we set the <code class="literal">distance</code> of the effect to a smaller number than the default, to make the button rapidly shake back and forth when clicked.</p></div></div><div class="section" title="Interaction components"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec82"/>Interaction components</h2></div></div></div><p>The next major feature of the jQuery <a id="id574" class="indexterm"/>UI is its interaction components, which are a set of behaviors that can be combined with custom code to produce complex interactive applications. One such component, for example, is <span class="strong"><strong>Resizable</strong></span>, which can allow the user to change the size of any element with natural dragging movements.</p><p>Applying an interaction to an element is as simple as calling the method that bears its name. For instance, we can make the book titles resizable with a call to <code class="literal">.resizable()</code> as follows:</p><div class="informalexample"><pre class="programlisting">$books.find('.title').resizable();</pre></div><p>
<span class="emphasis"><em>Listing 7.12</em></span>
</p><p>With jQuery UI's CSS file referenced in the document, this code will add a resizing handle to the bottom-right corner of the title box. Dragging this box alters the region's width and height as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/3145_07_05.jpg" alt="Interaction components"/></div><p>As by now we might expect, these methods can be customized with a host of options. If, say, we wish to constrain the resizing to only happen vertically, we can accomplish that by specifying which drag handle should be added as follows:</p><div class="informalexample"><pre class="programlisting">$books.find('.title').resizable({
<span class="strong"><strong>  handles: 's'</strong></span>
});</pre></div><p>
<span class="emphasis"><em>Listing 7.13</em></span>
</p><p>With a drag handle only on the south (bottom) side of the region, only the height of the region<a id="id575" class="indexterm"/> can be altered:</p><div class="mediaobject"><img src="graphics/3145_07_06.jpg" alt="Interaction components"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip40"/>Tip</h3><p>
<span class="strong"><strong>Other interaction components</strong></span>
</p><p>Other jQuery UI interactions <a id="id576" class="indexterm"/>include Draggable, Droppable, and Sortable. Like Resizable, they are highly configurable. We can view demos of all of them and their configuration options at <a class="ulink" href="http://jqueryui.com/">http://jqueryui.com/</a>.</p></div></div></div><div class="section" title="Widgets"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec83"/>Widgets</h2></div></div></div><p>In addition to these building-block <a id="id577" class="indexterm"/>interaction components, jQuery UI includes a handful of robust user interface widgets that appear and function out of the box like the <a id="id578" class="indexterm"/>full-fledged elements we are accustomed to seeing in desktop applications. Some of these are quite simple. The <span class="strong"><strong>Button</strong></span> widget, for example, enhances buttons and links on the page with attractive styling and rollover states.</p><p>Granting this appearance and behavior to all button elements on the page is extremely simple:</p><div class="informalexample"><pre class="programlisting">$(document).ready(function() {
  $('button').button();
});</pre></div><p>
<span class="emphasis"><em>Listing 7.14</em></span>
</p><p>When the stylesheet for the jQuery UI Smoothness theme is referenced, the buttons take on a glossy, beveled appearance:</p><div class="mediaobject"><img src="graphics/3145_07_07.jpg" alt="Widgets"/></div><p>As with other UI widgets and interactions, Button accepts several options. We may wish to provide appropriate icons for our two buttons, for example; the Button widget comes with a large number of predefined icons that we can employ. To do so, we could separate our <code class="literal">.button()</code> call into two, and <a id="id579" class="indexterm"/>
<a id="id580" class="indexterm"/>specify an icon for each as follows:</p><div class="informalexample"><pre class="programlisting">$('&lt;button&gt;Pause&lt;/button&gt;').click(function(event) {
  // ...
}).button({
  icons: {primary: 'ui-icon-pause'}
}).appendTo($controls);
$('&lt;button&gt;Resume&lt;/button&gt;').click(function(event) {
  // ...
}).button({
  icons: {primary: 'ui-icon-play'}
}).appendTo($controls);</pre></div><p>
<span class="emphasis"><em>Listing 7.15</em></span>
</p><p>The <code class="literal">primary</code> icons that we specified correspond to standard class names in jQuery UI's theme framework. By default, <code class="literal">primary</code> icons are displayed to the left of the button text while <code class="literal">secondary</code> icons are displayed to the right:</p><div class="mediaobject"><img src="graphics/3145_07_08.jpg" alt="Widgets"/></div><p>On the other hand, other widgets are much more sophisticated. The <span class="strong"><strong>Slider</strong></span> widget introduces a brand new form element, similar to an HTML5 range element but cross-compatible with all popular browsers. This requires a greater degree of customization and sophistication, as shown in the following code:</p><div class="informalexample"><pre class="programlisting">$('&lt;div id="slider"&gt;&lt;/div&gt;').slider({
  min: 0,
  max: $('#books li').length - 1
}).appendTo($controls);</pre></div><p>
<span class="emphasis"><em>Listing 7.16</em></span>
</p><p>A call to <code class="literal">.slider()</code> transforms a simple <code class="literal">&lt;div&gt;</code> element into a slider widget. The widget can be controlled by dragging or by pressing the arrow keys, to aid in accessibility:</p><div class="mediaobject"><img src="graphics/3145_07_09.jpg" alt="Widgets"/></div><p>In <span class="emphasis"><em>Listing 7.16</em></span> we've specified a minimum value of <code class="literal">0</code> for the slider, and a maximum of  the index of the last book in our slideshow. We can use this as a manual control for the slideshow, by sending messages back and forth between the slideshow and slider when their respective states change.</p><p>To react to the slider's value changing, we can bind a handler to a custom event that is triggered by sliders. This event, <code class="literal">slide</code>, is not a native JavaScript event, but acts like one in our jQuery code. However, observing these events is so common that instead of calling <code class="literal">.on()</code> explicitly, we can just <a id="id581" class="indexterm"/>
<a id="id582" class="indexterm"/>add our event handler to the <code class="literal">.slider()</code> call itself, as shown in the following code:</p><div class="informalexample"><pre class="programlisting">$('&lt;div id="slider"&gt;&lt;/div&gt;').slider({
  min: 0,
  max: $('#books li').length - 1,
<span class="strong"><strong>  slide: function(event, ui) {</strong></span>
<span class="strong"><strong>    $books.cycle(ui.value);</strong></span>
<span class="strong"><strong>  }</strong></span>
}).appendTo($controls);</pre></div><p>
<span class="emphasis"><em>Listing 7.17</em></span>
</p><p>Whenever the <code class="literal">slide</code> callback is <a id="id583" class="indexterm"/>invoked, its <code class="literal">ui</code> parameter is populated with information about the widget, including its current value. By passing this value along to the Cycle plugin, we can manipulate the current slide being shown.</p><p>We also need to update the slider widget whenever the slideshow advances to another slide. To communicate in this direction we can use Cycle's <code class="literal">before</code> callback, which is triggered before each slide transition:</p><div class="informalexample"><pre class="programlisting">$(document).ready(function() {
  var $books = $('#books').cycle({
    timeout: 2000,
    speed: 200,
    pause: true,
<span class="strong"><strong>    before: function() {</strong></span>
<span class="strong"><strong>      $('#slider')</strong></span>
<span class="strong"><strong>        .slider('value', $('#books li').index(this));</strong></span>
<span class="strong"><strong>    }</strong></span>
  });
});</pre></div><p>
<span class="emphasis"><em>Listing 7.18</em></span>
</p><p>Inside the <code class="literal">before</code> callback, we call the <code class="literal">.slider()</code> <a id="id584" class="indexterm"/>method again. This time, we call it with <code class="literal">value</code> as its first parameter to set the new slider value. In jQuery UI parlance, we call <code class="literal">value</code> a <span class="emphasis"><em>method</em></span> of slider, even though it is invoked by calling the <code class="literal">.slider()</code> method, not by its own dedicated <a id="id585" class="indexterm"/>method name.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip41"/>Tip</h3><p>
<span class="strong"><strong>Other widgets</strong></span>
</p><p>Other jQuery UI widgets include Datepicker, Dialog, Tabs, and Accordion. Each widget has several associated options, events, and methods. For a full list, visit <a class="ulink" href="http://jqueryui.com/">http://jqueryui.com/</a>.</p></div></div></div><div class="section" title="jQuery UI ThemeRoller"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec84"/>jQuery UI ThemeRoller</h2></div></div></div><p>One of the most exciting features <a id="id586" class="indexterm"/>of the jQuery UI library is ThemeRoller, a web-based interactive theme engine for the UI widgets. <a id="id587" class="indexterm"/>ThemeRoller makes creating highly customized, professional-looking elements quick and easy. The buttons and slider that we just created have the default theme applied to them; this theme will be output from ThemeRoller if no custom settings are supplied:</p><div class="mediaobject"><img src="graphics/3145_07_10.jpg" alt="jQuery UI ThemeRoller"/></div><p>Generating a completely different set of styles is a simple matter of visiting <a class="ulink" href="http://jqueryui.com/themeroller/">http://jqueryui.com/themeroller/</a>, modifying the various options as desired, and pressing the <span class="strong"><strong>Download Theme</strong></span> button. <a id="id588" class="indexterm"/>A <code class="literal">.zip</code> file of stylesheets and images can then be unpacked into your site directory. For example, by choosing a few different colors and textures, we can within minutes create a new, coordinated look for our buttons, icons, and slider, as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/3145_07_11.jpg" alt="jQuery UI ThemeRoller"/></div></div></div></body></html>
