<?xml version="1.0" encoding="utf-8" ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Plugin design recommendations</title><link rel="stylesheet" href="epub.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"/></head><body id="page"><div class="section" title="Plugin design recommendations"><div class="titlepage"><div><div><h1 class="title"><a id="ch08lvl1sec68"/>Plugin design recommendations</h1></div></div></div><p>Now that we have examined <a id="id709" class="indexterm"/>common ways to extend jQuery and jQuery UI by creating plugins, we can review and supplement what we've learned with a list of recommendations:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Protect the dollar (<code class="literal">$</code>) alias from potential interference from other libraries by using <code class="literal">jQuery</code> instead or passing <code class="literal">$</code> into an immediately invoked function expression (IIFE), so that it can be used as a local variable.</li><li class="listitem" style="list-style-type: disc">Whether extending the jQuery object with <code class="literal">$.myPlugin</code> or the jQuery prototype with <code class="literal">$.fn.myPlugin</code>, add no more than one property to the <code class="literal">$</code> namespace. Additional public methods and properties should be added to the plugin's namespace (for example, <code class="literal">$.myPlugin.publicMethod</code> or <code class="literal">$.fn.myPlugin.pluginProperty</code>).</li><li class="listitem" style="list-style-type: disc">Provide an object containing default options for the plugin: <code class="literal">$.fn.myPlugin.defaults = {size: 'large'}</code>.</li><li class="listitem" style="list-style-type: disc">Allow the plugin user to optionally override any of the default settings for all subsequent calls to the method (<code class="literal">$.fn.myPlugin.defaults.size = 'medium';</code>) or for a single call (<code class="literal">$('div').myPlugin({size: 'small'});</code>).</li><li class="listitem" style="list-style-type: disc">In most cases when extending the jQuery prototype <code class="literal">($.fn.myPlugin</code>), return <code class="literal">this</code> to allow the plugin user to chain additional jQuery methods to it (for example, <code class="literal">$('div').myPlugin().find('p').addClass('foo')</code>).</li><li class="listitem" style="list-style-type: disc">When extending the jQuery prototype (<code class="literal">$.fn.myPlugin</code>), enforce implicit iteration by calling <code class="literal">this.each()</code>.</li><li class="listitem" style="list-style-type: disc">Employ callback functions when appropriate to allow for flexible modification of the plugin's behavior without having to change the plugin's code.</li><li class="listitem" style="list-style-type: disc">If the plugin calls for user interface elements or needs to track elements' state, create it with the jQuery UI widget factory.</li><li class="listitem" style="list-style-type: disc">Maintain a set of automated unit tests for the plugin with a testing framework such as QUnit to ensure that it works as expected. See <a class="link" href="apb.html" title="Appendix&#xA0;B.&#xA0;Testing JavaScript with QUnit">Appendix B</a>, <span class="emphasis"><em>Testing JavaScript with QUnit</em></span>, for more information about QUnit.</li><li class="listitem" style="list-style-type: disc">Use a version control system such as Git to track revisions to the code. Consider hosting the plugin publicly on GitHub (<a class="ulink" href="http://github.com/">http://github.com/</a>) and allowing <a id="id710" class="indexterm"/>others to contribute.</li><li class="listitem" style="list-style-type: disc">If making the plugin available for others to use, make the licensing terms clear. Consider using the MIT license, which jQuery also uses.</li></ul></div><div class="section" title="Distributing a plugin"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec104"/>Distributing a plugin</h2></div></div></div><p>By following the previous <a id="id711" class="indexterm"/>recommendations, we can produce a clean, maintainable plugin that follows time-tested conventions. If it performs a useful, reusable task, we may want to share it with the jQuery community.</p><p>In addition to properly preparing plugin code as defined earlier, we should be sure to adequately document the operation of the plugin prior to distribution. We can choose a documentation format that suits our style, but may want to consider a standard such as JSDoc (described <a id="id712" class="indexterm"/>at <a class="ulink" href="http://usejsdoc.org/">http://usejsdoc.org/</a>). Several automatic documentation generators, including <a id="id713" class="indexterm"/>docco (<a class="ulink" href="http://jashkenas.github.com/docco/">http://jashkenas.github.com/docco/</a>) and <a id="id714" class="indexterm"/>dox (<a class="ulink" href="https://github.com/visionmedia/dox">https://github.com/visionmedia/dox</a>) are available, but using them requires initial setup of dependencies such as Node.js that can be quite advanced. Regardless of format, we must ensure that our documentation covers every parameter and option available for use with our plugin's methods.</p><p>Plugin code and documentation can be <a id="id715" class="indexterm"/>hosted anywhere; GitHub (<a class="ulink" href="http://github.com/">http://github.com/</a>) is a popular and free option. To publicize our GitHub-hosted work, we can submit information <a id="id716" class="indexterm"/>about it to the official jQuery Plugin Registry at <a class="ulink" href="http://plugins.jquery.com/">http://plugins.jquery.com/</a>.</p><p>Instructions for providing information about the plugin and publishing it to the registry can be found at <a class="ulink" href="http://plugins.jquery.com/docs/publish/">http://plugins.jquery.com/docs/publish/</a>. The process can be daunting at first, as it involves adding a post-receive hook to our GitHub repository, creating a JSON-formatted <a id="id717" class="indexterm"/>manifest file, and pushing a tagged version of the plugin to the remote repository. Nevertheless, the instructions are detailed and clear, and further help is available on the <code class="literal">#jquery-content</code> IRC channel on freenode (<a class="ulink" href="http://freenode.net">http://freenode.net</a>) or by e-mailing <code class="email">&lt;<a class="email" href="mailto:plugins@jquery.com">plugins@jquery.com</a>&gt;</code>.</p></div></div></body></html>
