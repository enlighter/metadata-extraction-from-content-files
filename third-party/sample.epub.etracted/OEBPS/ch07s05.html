<?xml version="1.0" encoding="utf-8" ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"><head><title>The jQuery Mobile plugin library</title><link rel="stylesheet" href="epub.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"/></head><body id="page"><div class="section" title="The jQuery Mobile plugin library"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec60"/>The jQuery Mobile plugin library</h1></div></div></div><p>We have seen how <a id="id589" class="indexterm"/>jQuery UI can assist us in assembling the user interface features needed for even a complex web application. The challenges it overcomes are varied and complex. A different set of hurdles exists, however, when preparing our pages for elegant presentation and interaction on mobile devices. To create a website or application for modern smart phones and tablets, we can turn to the jQuery Mobile project.</p><p>Like jQuery UI, jQuery Mobile consists of a suite of related components that can be used <span class="emphasis"><em>a</em></span> <span class="emphasis"><em>la carte</em></span> but which work together seamlessly. The framework provides an Ajax-driven navigation system, mobile-optimized interactive elements, and advanced touch event handlers. Again, as with jQuery UI, exploring all the features of jQuery Mobile is a daunting task, so instead we will provide some simple examples and refer to the online documentation for more details.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip42"/>Tip</h3><p>Downloads, documentation, and demos for jQuery Mobile are available at <a class="ulink" href="http://jquerymobile.com/">http://jquerymobile.com/</a>.</p><p>Our jQuery Mobile example will use Ajax technology, so web server software will be required in order to try these examples. More information is available in <a class="link" href="ch06.html" title="Chapter&#xA0;6.&#xA0;Sending Data with Ajax">Chapter 6</a>, <span class="emphasis"><em>Sending Data with Ajax</em></span>.</p></div></div><div class="section" title="HTML5 custom data attributes"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec85"/>HTML5 custom data attributes</h2></div></div></div><p>The code <a id="id590" class="indexterm"/>
<a id="id591" class="indexterm"/>examples we've seen so far in this chapter have all used JavaScript APIs exposed by plugins in order to summon up the plugin functionality. We've seen jQuery object methods, global functions, and custom selectors as some ways that plugins offer their services to our scripts. The jQuery Mobile library has these entry points as well, but the most common way of interacting with it is instead via HTML5 data-* attributes.</p><p>The HTML5 specification allows us to insert any attribute we want into an element, so long as the attribute is prefixed by <code class="literal">data-</code>. Such attributes are completely ignored when rendering the page, but are available to us in our jQuery scripts. When we include jQuery Mobile on a page, the script scans the page for some <code class="literal">data-*</code> attributes, and adds mobile-friendly features to the corresponding elements.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note12"/>Note</h3><p>The jQuery Mobile library looks for a few specific custom data attributes. We will examine more general ways of using this feature in our own scripts in <a class="link" href="ch12.html" title="Chapter&#xA0;12.&#xA0;Advanced DOM Manipulation">Chapter 12</a>, <span class="emphasis"><em>Advanced DOM Manipulation</em></span>.</p></div></div><p>Because of this design choice, we will be able to demonstrate some powerful features of jQuery Mobile here without <a id="id592" class="indexterm"/>
<a id="id593" class="indexterm"/>writing any JavaScript code ourselves.</p></div><div class="section" title="Mobile navigation"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec86"/>Mobile navigation</h2></div></div></div><p>One of the most prominent <a id="id594" class="indexterm"/>features of jQuery Mobile is its ability to simply transform the behavior of links on a page into Ajax-powered navigation. <a id="id595" class="indexterm"/>This transformation adds simple animation to the process, while preserving standard browser history navigation. To see this in action, we'll start with a document that presents links to information about several books (the same content we used for building a slideshow earlier) as follows:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt; 
&lt;html&gt; 
&lt;head&gt; 
  &lt;title&gt;jQuery Book Browser&lt;/title&gt; 
  &lt;link rel="stylesheet" href="booklist.css" type="text/css" /&gt;
  &lt;script src="jquery.js"&gt;&lt;/script&gt;
&lt;/head&gt; 
&lt;body&gt; 

&lt;div&gt;
  &lt;div&gt;
    &lt;h1&gt;Selected jQuery Books&lt;/h1&gt;
  &lt;/div&gt;

  &lt;div&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href="jq-game.html"&gt;jQuery Game Development 
        Essentials&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="jqmobile-cookbook.html"&gt;jQuery Mobile 
        Cookbook&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="jquery-designers.html"&gt;jQuery for 
        Designers&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="jquery-hotshot.html"&gt;jQuery Hotshot&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="jqui-cookbook.html"&gt;jQuery UI Cookbook&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="mobile-apps.html"&gt;Creating Mobile Apps with 
        jQuery Mobile&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="drupal-7.html"&gt;Drupal 7 Development by 
        Example&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="wp-mobile-apps.html"&gt;WordPress Mobile 
        Applications with PhoneGap&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;/body&gt;
&lt;/html&gt;</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note13"/>Note</h3><p>In the downloadable code package for this chapter, the finished HTML example page can be found in the file called <code class="literal">mobile.html</code>.</p></div></div><p>So far we have not introduced<a id="id596" class="indexterm"/>
<a id="id597" class="indexterm"/> jQuery Mobile at all, and the page is rendered in the default browser style, as we would expect. This is shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/3145_07_12.jpg" alt="Mobile navigation"/></div><p>Our next step is to change the <code class="literal">&lt;head&gt;</code> <a id="id598" class="indexterm"/>
<a id="id599" class="indexterm"/>section of the document so that it references jQuery Mobile and its stylesheet as follows:</p><div class="informalexample"><pre class="programlisting">&lt;head&gt; 
  &lt;title&gt;jQuery Book Browser&lt;/title&gt; 
<span class="strong"><strong>  &lt;meta name="viewport"</strong></span>
<span class="strong"><strong>    content="width=device-width, initial-scale=1"&gt; </strong></span>
  &lt;link rel="stylesheet" href="booklist.css" 
    type="text/css" /&gt;
<span class="strong"><strong>  &lt;link rel="stylesheet"</strong></span>
<span class="strong"><strong>    href="jquery.mobile/jquery.mobile.css" type="text/css" /&gt;</strong></span>
  &lt;script src="jquery.js"&gt;&lt;/script&gt;
<span class="strong"><strong>  &lt;script src="jquery.mobile/jquery.mobile.js"&gt;&lt;/script&gt;</strong></span>
&lt;/head&gt;</pre></div><p>Note that we have also introduced a <code class="literal">&lt;meta&gt;</code> element defining the viewport of the page. This declaration tells mobile browsers to scale the content of the document in such a way that it completely fills the width of the device. The jQuery Mobile styles are now applied to our document, displaying a larger sans-serif font and updating colors and spacing, as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/3145_07_13.jpg" alt="Mobile navigation"/></div><p>To properly handle navigation, jQuery Mobile needs to understand the structure of our page. We provide this information by <a id="id600" class="indexterm"/>
<a id="id601" class="indexterm"/>using the <code class="literal">data-role</code> attribute:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&lt;div data-role="page"&gt;</strong></span>
<span class="strong"><strong>  &lt;div data-role="header"&gt;</strong></span>
    &lt;h1&gt;Selected jQuery Books&lt;/h1&gt;
  &lt;/div&gt;

<span class="strong"><strong>  &lt;div data-role="content"&gt;</strong></span>
    &lt;ul&gt;
      &lt;li&gt;&lt;a href="jq-game.html"&gt;jQuery Game Development 
        Essentials&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="jqmobile-cookbook.html"&gt;jQuery Mobile 
        Cookbook&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="jquery-designers.html"&gt;jQuery for 
        Designers&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="jquery-hotshot.html"&gt;jQuery Hotshot&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="jqui-cookbook.html"&gt;jQuery UI Cookbook&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="mobile-apps.html"&gt;Creating Mobile Apps with 
        jQuery Mobile&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="drupal-7.html"&gt;Drupal 7 Development by 
        Example&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="wp-mobile-apps.html"&gt;WordPress Mobile 
        Applications with PhoneGap&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre></div><p>Now when the page loads, jQuery Mobile notices that we have a page header, and renders a standard-looking mobile header bar across the top of the page:</p><div class="mediaobject"><img src="graphics/3145_07_14.jpg" alt="Mobile navigation"/></div><p>When the text is too long for the header bar, jQuery Mobile truncates it and adds an ellipsis at the end. In this case, we can rotate the mobile device to its landscape orientation to see the full title:</p><div class="mediaobject"><img src="graphics/3145_07_15.jpg" alt="Mobile navigation"/></div><p>More importantly, this is all <a id="id602" class="indexterm"/>that is required in order to produce Ajax navigation. On the pages linked to from this list, we use similar markup:</p><div class="informalexample"><pre class="programlisting">&lt;div data-role="page"&gt;
  &lt;div data-role="header"&gt;
    &lt;h1&gt;WordPress Mobile Applications with PhoneGap&lt;/h1&gt;
  &lt;/div&gt;
  &lt;div data-role="content"&gt;
    &lt;img src="images/wp-mobile-apps.jpg" alt="WordPress Mobile 
      Applications with PhoneGap" /&gt;
    &lt;div class="title"&gt;WordPress Mobile Applications with 
      PhoneGap&lt;/div&gt;
    &lt;div class="author"&gt;Yuxian Eugene Liang&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre></div><p>When the link to this page is clicked on, jQuery Mobile loads the page with an Ajax call, grabs the portion of the document marked with <code class="literal">data-role="page"</code>, and displays this content using a fading transition:</p><div class="mediaobject"><img src="graphics/3145_07_16.jpg" alt="Mobile navigation"/></div></div><div class="section" title="Delivering multiple pages in one document"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec87"/>Delivering multiple pages in one document</h2></div></div></div><p>In addition to offering Ajax <a id="id603" class="indexterm"/>functionality for loading other documents, jQuery Mobile provides the tools to deliver the same user experience even if all the content is contained within a single document. To implement this, we simply link the anchors within the page using standard<code class="literal"> #</code> notation, and mark those sections of the page with <code class="literal">data-role="page"</code> just as if they were in separate documents, as follows:</p><div class="informalexample"><pre class="programlisting">&lt;div data-role="page"&gt;
  &lt;div data-role="header"&gt;
    &lt;h1&gt;Selected jQuery Books&lt;/h1&gt;
  &lt;/div&gt;

  &lt;div data-role="content"&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href="#jq-game"&gt;jQuery Game Development 
        Essentials&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="#jqmobile-cookbook"&gt;jQuery Mobile 
        Cookbook&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="#jquery-designers"&gt;jQuery for 
        Designers&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="#jquery-hotshot"&gt;jQuery Hotshot&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="#jqui-cookbook"&gt;jQuery UI Cookbook&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="#mobile-apps"&gt;Creating Mobile Apps with jQuery 
        Mobile&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="#drupal-7"&gt;Drupal 7 Development by 
        Example&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href="wp-mobile-apps.html"&gt;WordPress Mobile 
        Applications with PhoneGap&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div id="jq-game" data-role="page"&gt;
  &lt;div data-role="header"&gt;
    &lt;h1&gt;jQuery Game Development Essentials&lt;/h1&gt;
  &lt;/div&gt;
  &lt;div data-role="content"&gt;
    &lt;img src="images/jq-game.jpg" alt="jQuery Game Development 
      Essentials" /&gt;
    &lt;div class="title"&gt;jQuery Game Development Essentials&lt;/div&gt;
    &lt;div class="author"&gt;Salim Arsever&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre></div><p>We can freely choose between these two techniques at our convenience. Placing content in separate documents allows us to defer the loading of information until it is needed, at the cost of some higher <a id="id604" class="indexterm"/>overhead due to multiple page requests.</p></div><div class="section" title="Interactive elements"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec88"/>Interactive elements</h2></div></div></div><p>The bulk of the features <a id="id605" class="indexterm"/>offered by jQuery Mobile are specific interactive elements for use on a page. These elements enhance basic web page functionality, making page components more user-friendly for a touch interface. Among these elements are accordion-style collapsible sections, toggle switches, sliding panels, and responsive tables.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note14"/>Note</h3><p>There is considerable overlap between the user interface elements offered by jQuery UI and jQuery Mobile. It is not recommended to use the two libraries together on the same page, but because the most important widgets are offered by both, there is rarely a need to do so.</p></div></div><div class="section" title="List views"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec18"/>List views</h3></div></div></div><p>Due to their small, vertical screen layouts, smart phone applications are often heavily list-driven. We can use jQuery <a id="id606" class="indexterm"/>Mobile to easily enhance the lists on our pages to behave much more like <a id="id607" class="indexterm"/>these common native app elements. Once again, we simply introduce HTML5 custom data attributes:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&lt;ul data-role="listview" data-inset="true"&gt;</strong></span>
  &lt;li&gt;&lt;a href="#jq-game"&gt;jQuery Game Development 
    Essentials&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="#jqmobile-cookbook"&gt;jQuery Mobile Cookbook&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="#jquery-designers"&gt;jQuery for Designers&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="#jquery-hotshot"&gt;jQuery Hotshot&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="#jqui-cookbook"&gt;jQuery UI Cookbook&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="#mobile-apps"&gt;Creating Mobile Apps with jQuery 
    Mobile&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="#drupal-7"&gt;Drupal 7 Development by Example&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="wp-mobile-apps.html"&gt;WordPress Mobile Applications 
    with PhoneGap&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</pre></div><p>Adding <code class="literal">data-role="listview"</code> tells jQuery Mobile to make the links within this list large and easy to activate with a finger in a touch interface, while <code class="literal">data-inset="true"</code> gives the list a nice border to separate it from surrounding content. The result is a familiar, native-looking control, as follows:</p><div class="mediaobject"><img src="graphics/3145_07_17.jpg" alt="List views"/></div><p>Now we have large touch <a id="id608" class="indexterm"/>targets, but we can go a step further. List views like this in mobile apps are often paired with <a id="id609" class="indexterm"/>search fields to narrow down the items in the list. We can add such a field by introducing the <code class="literal">data-filter</code> attribute as follows:</p><div class="informalexample"><pre class="programlisting">&lt;ul data-role="listview" data-inset="true" data-filter="true"&gt;</pre></div><p>The result is a rounded input box <a id="id610" class="indexterm"/>with an appropriate icon, placed above the list:</p><div class="mediaobject"><img src="graphics/3145_07_18.jpg" alt="List views"/></div><p>Not only does this search field look <a id="id611" class="indexterm"/>native, but it behaves correctly too, even though we have <a id="id612" class="indexterm"/>added no code of our own:</p><div class="mediaobject"><img src="graphics/3145_07_19.jpg" alt="List views"/></div></div><div class="section" title="Toolbar buttons"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec19"/>Toolbar buttons</h3></div></div></div><p>Another user interface <a id="id613" class="indexterm"/>element enhanced by jQuery Mobile is the simple button. Just as jQuery UI allows us to standardize button appearances, jQuery Mobile increases the size and modifies the appearance of buttons to optimize them for touch input.</p><p>In some cases, jQuery Mobile even creates appropriate buttons for us where before there were none. For instance, there are often buttons in the toolbar of a mobile app. One standard button is the <span class="strong"><strong>Back</strong></span> button in the upper-left corner of the screen, allowing the user to navigate up one level. If we add a <code class="literal">data-add-back-btn</code> attribute to our page <code class="literal">&lt;div&gt;</code> elements, we can have this feature without any scripting work:</p><div class="informalexample"><pre class="programlisting">&lt;div data-role="page" data-add-back-btn="true"&gt;</pre></div><p>Once this attribute has been added, a standard <span class="strong"><strong>Back</strong></span> button is added to the toolbar of each page we navigate to:</p><div class="mediaobject"><img src="graphics/3145_07_20.jpg" alt="Toolbar buttons"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note15"/>Note</h3><p>A complete listing of HTML5 data attributes for initializing and configuring jQuery Mobile widgets can be found at <a class="ulink" href="http://jquerymobile.com/">http://jquerymobile.com/</a>.</p></div></div></div></div><div class="section" title="Advanced features"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec89"/>Advanced features</h2></div></div></div><p>As our mobile pages require more <a id="id614" class="indexterm"/>customized design elements and more complex interactions, jQuery Mobile provides robust tools to help us create them. All of the features are documented on the jQuery Mobile site (<a class="ulink" href="http://jquerymobile.com/">http://jquerymobile.com/</a>). While these features are both too advanced and too numerous to discuss here in detail, a few deserve brief mention:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Mobile-friendly events</strong></span>: When jQuery Mobile is referenced on a page, our jQuery code has access to a number of special events including <code class="literal">tap</code>, <code class="literal">taphold</code>, and <code class="literal">swipe</code>. Handlers for these events can be bound with the same <code class="literal">.on()</code> method as for <a id="id615" class="indexterm"/><a id="id616" class="indexterm"/>any other event. With <code class="literal">taphold</code> and <code class="literal">swipe</code> in particular, their default configurations, which include touch duration, can be modified by accessing properties of the <code class="literal">$.event.special.taphold</code> and <code class="literal">$.event.special.swipe</code> objects. In addition to touch-based events, jQuery Mobile provides special events that react to scrolling, orientation change, and various stages of its page navigation, as well as a set of virtualized mouse events<span class="strong"><strong> </strong></span>that react to both mouse and touch.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Theming</strong></span>: As with jQuery <a id="id617" class="indexterm"/><a id="id618" class="indexterm"/>UI, jQuery Mobile offers a ThemeRoller (<a class="ulink" href="http://jquerymobile.com/themeroller/">http://jquerymobile.com/themeroller/</a>) for customizing the look and feel of widgets.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>PhoneGap integration</strong></span>: Sites <a id="id619" class="indexterm"/><a id="id620" class="indexterm"/>built with jQuery Mobile are easy to convert to native mobile applications using PhoneGap (Cordova), with access to mobile device APIs (such as camera, accelerometer, and geolocation) and app stores. The <a id="id621" class="indexterm"/><code class="literal">$.support.cors</code> and <code class="literal">$.mobile.allowCrossDomainPages</code> <a id="id622" class="indexterm"/>properties can even allow access to pages not contained within the application, such as those on a remote server.</li></ul></div></div></div></body></html>
