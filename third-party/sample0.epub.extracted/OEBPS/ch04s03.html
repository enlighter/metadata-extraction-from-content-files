<?xml version="1.0" encoding="utf-8" ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Effects and duration</title><link rel="stylesheet" href="epub.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"/></head><body id="page"><div class="section" title="Effects and duration"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec33"/>Effects and duration</h1></div></div></div><p>When we include a duration (sometimes also referred to as a speed) with <code class="literal">.show()</code> or <code class="literal">.hide()</code>, it becomes animated&#x2014;occurring over a specified period of time. The <code class="literal">.hide(duration)</code> method, for <a id="id305" class="indexterm"/>example, decreases an element's height, width, and <a id="id306" class="indexterm"/>opacity simultaneously until all three reach zero, at which point the CSS rule <code class="literal">display: none</code> is applied. The <code class="literal">.show(duration)</code> method will increase the element's height from <a id="id307" class="indexterm"/>top to bottom, width from the left-hand side to the right-hand side, and opacity from 0 to 1 until its contents are completely visible.</p><div class="section" title="Speeding in"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec43"/>Speeding in</h2></div></div></div><p>With any jQuery effect, we <a id="id308" class="indexterm"/>can use one of the two preset speeds, <code class="literal">'slow'</code> or <code class="literal">'fast'</code>. Using <code class="literal">.show('slow')</code> makes the show effect complete in 600 milliseconds (0.6 seconds), <code class="literal">.show('fast')</code> in 200 milliseconds. If any other string is supplied, jQuery's default <a id="id309" class="indexterm"/>
<a id="id310" class="indexterm"/>animation duration of 400 <a id="id311" class="indexterm"/>
<a id="id312" class="indexterm"/>milliseconds will be used. For even greater precision, we can specify a number of milliseconds: for example, <code class="literal">.show(850)</code>. Note that in this case we are specifying a numeric value, so we do not use quotation marks.</p><p>Let's include a speed in <a id="id313" class="indexterm"/>our example when showing the second paragraph of Lincoln's Gettysburg Address:</p><div class="informalexample"><pre class="programlisting">$(document).ready(function() {
  $('p').eq(1).hide();  
  $('a.more').click(function(event) {
    event.preventDefault();
    $('p').eq(1).show('slow'); 
    $(this).hide();
  });
});</pre></div><p>
<span class="emphasis"><em>Listing 4.8</em></span>
</p><p>When we capture the paragraph's appearance at roughly halfway through the effect, we see the following:</p><div class="mediaobject"><img src="graphics/3145OS_04_05.jpg" alt="Speeding in"/></div></div><div class="section" title="Fading in and fading out"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec44"/>Fading in and fading out</h2></div></div></div><p>While the animated <code class="literal">.show()</code> and <code class="literal">.hide()</code> methods are certainly flashy, in practice, they animate more properties <a id="id314" class="indexterm"/>
<a id="id315" class="indexterm"/>than are useful. Fortunately, jQuery offers a couple of other prebuilt animations for a more subtle effect. For example, to have the whole paragraph appear just by gradually increasing the opacity, we can use .<code class="literal">fadeIn('slow')</code> instead:</p><div class="informalexample"><pre class="programlisting">$(document).ready(function() {
  $('p').eq(1).hide();
  $('a.more').click(function(event) {
    event.preventDefault();
    $('p').eq(1).fadeIn('slow'); 
    $(this).hide();
  });
});</pre></div><p>
<span class="emphasis"><em>Listing 4.9</em></span>
</p><p>Now when we look at the <a id="id316" class="indexterm"/>
<a id="id317" class="indexterm"/>paragraph during the effect, it looks like this:</p><div class="mediaobject"><img src="graphics/3145OS_04_06.jpg" alt="Fading in and fading out"/></div><p>The difference here is that the <code class="literal">.fadeIn()</code> <a id="id318" class="indexterm"/>
<a id="id319" class="indexterm"/>effect starts by setting the dimensions of the paragraph so that the contents can simply fade into it. To gradually decrease the opacity we can use <code class="literal">.fadeOut()</code>.</p></div><div class="section" title="Sliding up and sliding down"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec45"/>Sliding up and sliding down</h2></div></div></div><p>The fading <a id="id320" class="indexterm"/>
<a id="id321" class="indexterm"/>animations are very useful for items that are outside the flow of the document. For example, these are typical effects to apply to "lightbox" elements that are overlaid on the page. However, when an element is part of the document flow, calling <code class="literal">.fadeIn()</code> on it causes the document to jump to provide the real estate needed for the new element, which is not always aesthetically pleasing.</p><p>In these cases, jQuery's <code class="literal">.slideDown()</code> and <code class="literal">.slideUp()</code> methods are often the right choice. These effects animate only the height of the selected elements. To have our paragraph appear using a vertical slide effect, we can call <code class="literal">.slideDown('slow')</code>:</p><div class="informalexample"><pre class="programlisting">$(document).ready(function() {
  $('p').eq(1).hide();  
  $('a.more').click(function(event) {
    event.preventDefault();
    $('p').eq(1).slideDown('slow'); 
    $(this).hide();
  });
});</pre></div><p>
<span class="emphasis"><em>Listing 4.10</em></span>
</p><p>This time when we <a id="id322" class="indexterm"/>
<a id="id323" class="indexterm"/>examine the paragraph at the animation's midpoint, we see the following:</p><div class="mediaobject"><img src="graphics/3145OS_04_07.jpg" alt="Sliding up and sliding down"/></div><p>To reverse the effect, we would instead call <code class="literal">.slideUp()</code>.</p></div><div class="section" title="Toggling visibility"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec46"/>Toggling visibility</h2></div></div></div><p>Sometimes we have a need to toggle the visibility of elements, rather than displaying them once as we have done in the previous examples. This toggling can be achieved by first checking the visibility of the <a id="id324" class="indexterm"/>matched elements and then calling the appropriate method. Using the fade effects again, we can modify the example script to look like this:</p><div class="informalexample"><pre class="programlisting">$(document).ready(function() {
  var $firstPara = $('p').eq(1);
  $firstPara.hide();  
  $('a.more').click(function(event) {
    event.preventDefault();
    if ($firstPara.is(':hidden')) {
      $firstPara.fadeIn('slow'); 
      $(this).text('read less');
    } else {
      $firstPara.fadeOut('slow');
      $(this).text('read more');
    }
  });
});</pre></div><p>
<span class="emphasis"><em>Listing 4.11</em></span>
</p><p>As we did earlier in the chapter, we're caching our selector here to avoid repeated DOM traversal. Notice too that we're <a id="id325" class="indexterm"/>no longer hiding the clicked link; instead, we're changing its text.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip24"/>Tip</h3><p>To examine the text contained by an element and to change that text, we're using the <code class="literal">.text()</code> method. <a id="id326" class="indexterm"/>We will delve into this method more fully in <a class="link" href="ch05.html" title="Chapter&#xA0;5.&#xA0;Manipulating the DOM">Chapter 5</a>, <span class="emphasis"><em>Manipulating the DOM</em></span>.</p></div></div><p>Using an <code class="literal">if-else</code> statement <a id="id327" class="indexterm"/>is a perfectly reasonable way to toggle elements' visibility. But with jQuery's compound effect methods, we can remove some conditional logic from our code. jQuery provides a <code class="literal">.toggle()</code> method, which acts like <code class="literal">.show()</code> and <code class="literal">.hide()</code>, and like them, it can be used with or without a duration argument. Other compound methods include <code class="literal">.fadeToggle()</code> and <code class="literal">.slideToggle()</code>, which show or hide elements <a id="id328" class="indexterm"/>using the corresponding effects. Here is what the script looks like when we use the <code class="literal">.slideToggle()</code> method:</p><div class="informalexample"><pre class="programlisting">$(document).ready(function() {
  var $firstPara = $('p').eq(1);
  $firstPara.hide();  
  $('a.more').click(function(event) {
    event.preventDefault();
    $firstPara.slideToggle('slow');
    var $link = $(this);
    if ($link.text() == 'read more') {
      $link.text('read less'); 
    } else {
      $link.text('read more');
    }
  });
});</pre></div><p>
<span class="emphasis"><em>Listing 4.12</em></span>
</p><p>To reduce repetition of <code class="literal">$(this)</code>, we're storing the result in the <code class="literal">$link</code> variable for performance and readability. Also, the conditional statement checks for the text of the link rather than the visibility of the <a id="id329" class="indexterm"/>second paragraph, since we're only using it to change the text.</p></div></div></body></html>
