<?xml version="1.0" encoding="utf-8" ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Content getter and setter methods</title><link rel="stylesheet" href="epub.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"/></head><body id="page"><div class="section" title="Content getter and setter methods"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec41"/>Content getter and setter methods</h1></div></div></div><p>It would be nice to be able <a id="id433" class="indexterm"/>
<a id="id434" class="indexterm"/>
<a id="id435" class="indexterm"/>
<a id="id436" class="indexterm"/>to modify the pull quote a bit by dropping some words and replacing them with ellipses to keep the content brief. To demonstrate this, we have wrapped a few words of the example text in a <code class="literal">&lt;span class="drop"&gt;</code> tag.</p><p>The easiest way to accomplish this replacement is to directly specify the new HTML entity that is to replace the old one. The <code class="literal">.html()</code> <a id="id437" class="indexterm"/>method is perfect for our needs:</p><div class="informalexample"><pre class="programlisting">$(document).ready(function() {
  $('span.pull-quote').each(function(index) {
    var $parentParagraph = $(this).parent('p');
    $parentParagraph.css('position', 'relative');

    var $clonedCopy = $(this).clone();
    $clonedCopy
      .addClass('pulled')
<span class="strong"><strong>      .find('span.drop')</strong></span>
<span class="strong"><strong>        .html('&amp;hellip;')</strong></span>
<span class="strong"><strong>      .end()</strong></span>
      .prependTo($parentParagraph);
  });
});</pre></div><p>
<span class="emphasis"><em>Listing 5.19</em></span>
</p><p>The new lines in <span class="emphasis"><em>Listing 5.19</em></span> rely on the DOM traversal techniques we learned in <a class="link" href="ch02.html" title="Chapter&#xA0;2.&#xA0;Selecting Elements">Chapter 2</a>, <span class="emphasis"><em>Selecting Elements</em></span>. We use <code class="literal">.find()</code> to search inside the pull quote for any <code class="literal">&lt;span class="drop"&gt;</code> elements, operate on them, and then return to the pull quote itself by calling <code class="literal">.end()</code>. In between these methods, we invoke <code class="literal">.html()</code> to change the content into an ellipsis (using the appropriate HTML entity).</p><p>When called without <a id="id438" class="indexterm"/>
<a id="id439" class="indexterm"/>
<a id="id440" class="indexterm"/>
<a id="id441" class="indexterm"/>arguments, <code class="literal">.html()</code> returns a string representation of the HTML entity inside the matched element. With an argument, the contents of the element are replaced by the supplied HTML entity. We must take care to only specify a valid HTML entity, escaping special characters properly when using this technique.</p><p>The specified words have now been replaced by an ellipsis:</p><div class="mediaobject"><img src="graphics/3145OS_05_11.jpg" alt="Content getter and setter methods"/></div><p>Pull quotes typically do not retain their original font formatting, such as the boldfaced <span class="strong"><strong>one more side</strong></span> text in this example. What we really want to display is the text of <code class="literal">&lt;span class="pull-quote"&gt;</code> stripped of any <code class="literal">&lt;strong&gt;</code>, <code class="literal">&lt;em&gt;</code>, <code class="literal">&lt;a href&gt;</code>, or other inline tags. To replace all of the pull-quote HTML entities with a stripped, text-only version, we can employ the <code class="literal">.html()</code> method's companion method, <code class="literal">.text()</code>.</p><p>Like <code class="literal">.html()</code>, the <code class="literal">.text()</code> method <a id="id442" class="indexterm"/>can either retrieve the content of the matched element or replace its content with a new string. Unlike <code class="literal">.html()</code>, however, <code class="literal">.text()</code> always gets or sets a plain <a id="id443" class="indexterm"/>
<a id="id444" class="indexterm"/>
<a id="id445" class="indexterm"/>
<a id="id446" class="indexterm"/>text string. When <code class="literal">.text()</code> retrieves content, all of the included tags are ignored, and HTML entities are translated into plain characters. When it sets content, special characters such as <code class="literal">&lt;</code> are translated into their HTML entity equivalents:</p><div class="informalexample"><pre class="programlisting">$(document).ready(function() {
  $('span.pull-quote').each(function(index) {
    var $parentParagraph = $(this).parent('p');
    $parentParagraph.css('position', 'relative');
    var $clonedCopy = $(this).clone();
    $clonedCopy
      .addClass('pulled')
      .find('span.drop')
        .html('&amp;hellip;')
      .end()
<span class="strong"><strong>      .text($clonedCopy.text())</strong></span>
      .prependTo($parentParagraph);
  });
});</pre></div><p>
<span class="emphasis"><em>Listing 5.20</em></span>
</p><p>When this sneaky bit of code fetches the content of the pull quote with <code class="literal">$clonedCopy.text()</code>, we get a plain string containing the text without tags. Therefore, when that text is fed right back into <code class="literal">.text()</code>, the markup is removed and the bold text in our example is no longer bold:</p><div class="mediaobject"><img src="graphics/3145OS_05_12.jpg" alt="Content getter and setter methods"/></div></div></body></html>
